{"mappings":";;;ACOO,KAAK,CAAC,yCAAM,IAAI,IAAY,GAAa,CAAC;IAC/C,KAAK,CAAC,CAAC,WAAC,QAAQ,EAAC,CAAC,GAAG,yBAAS,CAAC,IAAI;IACnC,KAAK,CAAC,KAAK,GAAG,CAAC;WAAG,QAAQ,CAAC,gBAAgB,CAAoB,CAAG;IAAC,CAAC;IAEpE,EAAE,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,EAClB,KAAK,CAAC,GAAG,EAAE,IAAI,GAAK,CAAC;QACnB,EAAE,0BAA0B,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC;YAC5C,IAAI,CAAC,MAAM,GAAG,CAAQ;YACtB,IAAI,CAAC,YAAY,CAAC,CAAK,MAAE,CAAY;QACvC,CAAC;QACD,MAAM,CAAC,IAAI;IACb,CAAC;SAED,MAAM,CAAC,IAAI;IAEb,MAAM,CAAC,QAAQ,CAAC,QAAQ;AAC1B,CAAC;;;ADrBD,cAAc,IAAI,cAAmB,GAAK,CAAC;IACzC,cAAc,CAAC,SAAS,CAAC,CAAgB,qBAAQ,CAAC;QAChD,cAAc,CAAC,YAAY,CAAC,CAAgB,kBAAG,OAAe,EAAE,UAAkB,GAAK,CAAC;YACtF,GAAG,CAAC,CAAC;gBACH,EAAE,EAAE,UAAU,IAAI,UAAU,CAAC,QAAQ,CAAC,CAAO,SAC3C,OAAO,GAAG,yCAAM,CAAC,OAAO;YAE5B,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC;gBACf,OAAO,CAAC,KAAK,CAAC,KAAK;YACrB,CAAC;YACD,MAAM,CAAC,OAAO;QAChB,CAAC;IACH,CAAC;AACH,CAAC","sources":["packages/external-links/lib/.eleventy.ts","packages/external-links/lib/linker.ts"],"sourcesContent":["import { linker } from '../lib/linker';\n\nmodule.exports = (eleventyConfig: any) => {\n  eleventyConfig.namespace('external-links', () => {\n    eleventyConfig.addTransform('external-links', (content: string, outputPath: string) => {\n      try {\n        if (outputPath && outputPath.endsWith('.html')) {\n          content = linker(content);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n      return content;\n    });\n  });\n};\n","import { parseHTML } from 'linkedom';\n\n/**\n * Finds unsafe anchor tags and adds safer attributes\n * @param html The HTML string\n * @returns The parsed HTML with safe anchor tags\n */\nexport const linker = (html: string): string => {\n  const { document } = parseHTML(html);\n  const links = [...document.querySelectorAll<HTMLAnchorElement>('a')];\n\n  if (links.length > 0) {\n    links.map((link) => {\n      if (/^(https?\\:\\/\\/|\\/\\/)/i.test(link.href)) {\n        link.target = '_blank';\n        link.setAttribute('rel', 'noreferrer');\n      }\n      return link;\n    });\n  } else {\n    return html;\n  }\n  return document.toString();\n};\n"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"../../../"}